<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="theme-color" content="#c84444" />
    <meta name="description" content="Calcola il voto necessario per raggiungere la tua media target" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="MediaHo" />
    <link rel="manifest" href="/manifest.json" />
    <link rel="icon" type="image/png" sizes="192x192" href="/static/icons/icon-192.png" />
    <link rel="apple-touch-icon" href="/static/icons/icon-192.png" />
    <title>Calcoli & Previsioni - che media ho?</title>
    <script src="/static/js/theme.js"></script>
    <link rel="stylesheet" href="/static/common.css" />
    <link rel="stylesheet" href="/static/css/goal.css" />
  </head>
  <body>
    <!-- Error Notification -->
    <div class="error-notification" id="errorNotification"></div>

    <button class="theme-toggle" id="themeToggle" aria-label="Toggle theme">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="5"/>
        <line x1="12" x2="12" y1="1" y2="3"/>
        <line x1="12" x2="12" y1="21" y2="23"/>
        <line x1="4.22" x2="5.64" y1="4.22" y2="5.64"/>
        <line x1="18.36" x2="19.78" y1="18.36" y2="19.78"/>
        <line x1="1" x2="3" y1="12" y2="12"/>
        <line x1="21" x2="23" y1="12" y2="12"/>
        <line x1="4.22" x2="5.64" y1="19.78" y2="18.36"/>
        <line x1="18.36" x2="19.78" y1="5.64" y2="4.22"/>
      </svg>
    </button>

    <div class="header-section">
      <h1 class="page-title">üéØ Calcoli & Previsioni</h1>
      <p class="page-subtitle">Calcola obiettivi e prevedi l'impatto dei voti sulla tua media!</p>
    </div>

    <div class="container">
      <!-- Tabs -->
      <div class="tabs-container">
        <button class="tab-button active" onclick="switchTab('overall')">
          üåç Media Generale
        </button>
        <button class="tab-button" onclick="switchTab('goal')">
          üéØ Obiettivo
        </button>
        <button class="tab-button" onclick="switchTab('predict')">
          üîÆ Previsione
        </button>
      </div>

      <!-- Goal Calculator Tab -->
      <div class="tab-content" id="goalTab">
        <!-- Calculator Form -->
        <div class="calculator-card">
          <form id="goalForm">
            <div class="form-group">
              <label class="form-label" for="periodSelectGoal">Periodo</label>
              <select class="form-select" id="periodSelectGoal" required>
                <option value="">Seleziona un periodo...</option>
                {% for period in grades_avr.keys() if period != 'all_avr' %}
                <option value="{{ period }}">Periodo {{ period }}</option>
                {% endfor %}
              </select>
            </div>

            <div class="form-group">
              <label class="form-label" for="targetAverage">Media Target <span id="targetRangeLabel">(1-10)</span></label>
              <input 
                type="number" 
                class="form-input" 
                id="targetAverage" 
                min="1" 
                max="10" 
                step="0.1" 
                placeholder="Es: 7.5"
                required
              />
              <small id="targetHelp" style="display: block; margin-top: 6px; font-size: 12px; opacity: 0.7;"></small>
            </div>

            <div class="form-group">
              <label class="form-label">
                Numero di voti da prendere
                <span style="font-size: 12px; opacity: 0.7; font-weight: normal;">(aggiungi pi√π voti per una pianificazione migliore)</span>
              </label>
              <div class="grades-input-container" id="gradesInputContainer">
                <div class="grade-input-group">
                  <span style="font-size: 14px; opacity: 0.8;">1 voto</span>
                </div>
              </div>
              <button type="button" class="add-grade-btn" onclick="addGradeInput()">+ Aggiungi voto</button>
            </div>

            <button type="button" class="calculate-btn" id="smartSuggestBtnGoal" style="background: var(--accent); margin-bottom: 12px;" onclick="getSmartSuggestionGoal()">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                <line x1="12" y1="17" x2="12.01" y2="17"/>
              </svg>
              üéØ Suggerimenti Intelligenti
            </button>

            <details style="margin-bottom: 16px;">
              <summary style="cursor: pointer; font-weight: 600; color: var(--text); opacity: 0.8; font-size: 14px; padding: 8px 0;">
                ‚öôÔ∏è Opzionale: Calcola per una materia specifica
              </summary>
              <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid var(--secondary);">
                <div class="form-group">
                  <label class="form-label" for="subjectSelectGoal">Materia</label>
                  <select class="form-select" id="subjectSelectGoal" disabled>
                    <option value="">Prima seleziona un periodo...</option>
                  </select>
                </div>
              </div>
            </details>

            <button type="submit" class="calculate-btn" id="calculateBtnGoal">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
              </svg>
              Calcola per Materia Specifica
            </button>
          </form>
        </div>

        <!-- Result Card for Goal -->
        <div class="result-card" id="resultCardGoal">
          <div class="result-header">
            <div class="result-icon" id="resultIconGoal">
              <span id="resultEmojiGoal">üéØ</span>
            </div>
            <h2 class="result-title" id="resultTitleGoal">Risultato</h2>
          </div>
          <div class="result-content" id="resultContentGoal">
            <div class="result-row">
              <span class="result-label">Media Attuale</span>
              <span class="result-value" id="currentAverageGoal">-</span>
            </div>
            <div class="result-row">
              <span class="result-label">Media Target</span>
              <span class="result-value" id="targetAverageDisplay">-</span>
            </div>
            <div class="result-row">
              <span class="result-label">Voti Necessari</span>
              <span class="result-value highlight" id="requiredGradesGoal">-</span>
            </div>
          </div>
          <div class="result-message" id="resultMessageGoal">
            Completa il form per vedere i risultati
          </div>
        </div>

        <!-- Smart Suggestions Result Card for Goal -->
        <div class="result-card" id="resultCardSmartSuggestionsGoal" style="display: none;">
          <div class="result-header">
            <div class="result-icon" style="background: var(--accent);">
              <span>üéØ</span>
            </div>
            <h2 class="result-title">Suggerimenti Intelligenti</h2>
          </div>
          <div class="result-content">
            <div class="result-row">
              <span class="result-label">Periodo</span>
              <span class="result-value" id="periodSmartGoal">-</span>
            </div>
            <div class="result-row">
              <span class="result-label">Media Target</span>
              <span class="result-value" id="targetAverageSmartGoal">-</span>
            </div>
          </div>
          <div id="suggestionsContainerGoal" style="margin-top: 16px;">
            <!-- Suggestions will be populated here -->
          </div>
          <div class="result-message" id="resultMessageSmartGoal">
            Completa il form per vedere i suggerimenti
          </div>
        </div>

        <!-- Info Box -->
        <div class="info-box">
          <div class="info-box-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="16" x2="12" y2="12"/>
              <line x1="12" y1="8" x2="12.01" y2="8"/>
            </svg>
            Come funziona?
          </div>
          <div class="info-box-content">
            <strong>üéØ Suggerimenti Intelligenti:</strong> Ricevi automaticamente una lista delle materie 
            del periodo su cui concentrarti per raggiungere pi√π facilmente la tua media target!<br><br>
            <strong>üìä Calcolo Specifico:</strong> Oppure calcola per una materia specifica se hai gi√† in mente 
            quale materia vuoi migliorare nel periodo selezionato.
          </div>
        </div>
      </div>

      <!-- Predict Calculator Tab -->
      <div class="tab-content" id="predictTab">
        <!-- Calculator Form for Predict -->
        <div class="calculator-card">
          <form id="predictForm">
            <div class="form-group">
              <label class="form-label" for="periodSelectPredict">Periodo</label>
              <select class="form-select" id="periodSelectPredict" required>
                <option value="">Seleziona un periodo...</option>
                {% for period in grades_avr.keys() if period != 'all_avr' %}
                <option value="{{ period }}">Periodo {{ period }}</option>
                {% endfor %}
              </select>
            </div>

            <div class="form-group">
              <label class="form-label" for="subjectSelectPredict">Materia</label>
              <select class="form-select" id="subjectSelectPredict" required disabled>
                <option value="">Prima seleziona un periodo...</option>
              </select>
            </div>

            <div class="form-group">
              <label class="form-label">
                Voti che pensi di prendere
                <span style="font-size: 12px; opacity: 0.7; font-weight: normal;">(aggiungi uno o pi√π voti per vedere l'impatto)</span>
              </label>
              <div class="grades-input-container" id="predictGradesContainer">
                <div class="grade-input-group">
                  <input 
                    type="number" 
                    class="grade-input-small predict-grade-input" 
                    min="1" 
                    max="10" 
                    step="0.5" 
                    placeholder="Voto"
                    required
                  />
                </div>
              </div>
              <button type="button" class="add-grade-btn" onclick="addPredictGradeInput()">+ Aggiungi voto</button>
            </div>

            <button type="submit" class="calculate-btn" id="calculateBtnPredict">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12 6 12 12 16 14"/>
              </svg>
              Prevedi
            </button>
          </form>
        </div>

        <!-- Result Card for Predict -->
        <div class="result-card" id="resultCardPredict">
          <div class="result-header">
            <div class="result-icon" id="resultIconPredict">
              <span id="resultEmojiPredict">üîÆ</span>
            </div>
            <h2 class="result-title" id="resultTitlePredict">Previsione</h2>
          </div>
          <div class="result-content">
            <div class="result-row">
              <span class="result-label">Media Attuale</span>
              <span class="result-value" id="currentAveragePredict">-</span>
            </div>
            <div class="result-row">
              <span class="result-label">Media Prevista</span>
              <span class="result-value highlight" id="predictedAverage">-</span>
            </div>
            <div class="result-row">
              <span class="result-label">Variazione</span>
              <span class="result-value" id="averageChange">-</span>
            </div>
          </div>
          <div class="result-message" id="resultMessagePredict">
            Completa il form per vedere la previsione
          </div>
        </div>

        <!-- Info Box -->
        <div class="info-box">
          <div class="info-box-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="16" x2="12" y2="12"/>
              <line x1="12" y1="8" x2="12.01" y2="8"/>
            </svg>
            Come funziona?
          </div>
          <div class="info-box-content">
            La previsione calcola come cambier√† la tua media se ricevi i voti che inserisci.
            Puoi aggiungere pi√π voti per simulare scenari diversi e vedere l'impatto sulla tua media!
          </div>
        </div>
      </div>

      <!-- Overall Average Tab -->
      <div class="tab-content active" id="overallTab">
        <!-- Section Header for Goal -->
        <h3 style="font-size: 22px; font-weight: bold; color: var(--text); margin-bottom: 16px; padding-left: 8px; border-left: 4px solid var(--accent);">
          üéØ Calcola Obiettivo per Media Generale
        </h3>
        <p style="font-size: 14px; opacity: 0.8; margin-bottom: 24px; padding-left: 12px;">
          Scopri quali voti ti servono in una materia per raggiungere una media generale target
        </p>

        <!-- Overall Goal Section -->
        <div>
          <div class="calculator-card">
            <form id="overallGoalForm">
              <div class="form-group">
                <label class="form-label" for="targetOverallAverage">Media Generale Target <span id="targetOverallRangeLabel">(1-10)</span></label>
                <input 
                  type="number" 
                  class="form-input" 
                  id="targetOverallAverage" 
                  min="1" 
                  max="10" 
                  step="0.1" 
                  placeholder="Es: 7.5"
                  required
                />
                <small id="targetOverallHelp" style="display: block; margin-top: 6px; font-size: 12px; opacity: 0.7;"></small>
              </div>

              <div class="form-group">
                <label class="form-label">
                  Numero di voti da prendere
                  <span style="font-size: 12px; opacity: 0.7; font-weight: normal;">(per raggiungere la media generale)</span>
                </label>
                <div class="grades-input-container" id="overallGoalGradesContainer">
                  <div class="grade-input-group">
                    <span style="font-size: 14px; opacity: 0.8;">1 voto</span>
                  </div>
                </div>
                <button type="button" class="add-grade-btn" onclick="addOverallGoalGradeInput()">+ Aggiungi voto</button>
              </div>

              <button type="button" class="calculate-btn" id="smartSuggestBtn" style="background: var(--accent);" onclick="getSmartSuggestion()">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"/>
                  <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                  <line x1="12" y1="17" x2="12.01" y2="17"/>
                </svg>
                üéØ Suggerimenti Intelligenti
              </button>
            </form>
          </div>

          <!-- Smart Suggestions Result Card -->
          <div class="result-card" id="resultCardSmartSuggestions" style="display: none;">
            <div class="result-header">
              <div class="result-icon" style="background: var(--accent);">
                <span>üéØ</span>
              </div>
              <h2 class="result-title">Suggerimenti Intelligenti</h2>
            </div>
            <div class="result-content">
              <div class="result-row">
                <span class="result-label">Media Generale Attuale</span>
                <span class="result-value" id="currentOverallAverageSmart">-</span>
              </div>
              <div class="result-row">
                <span class="result-label">Media Generale Target</span>
                <span class="result-value" id="targetOverallAverageSmart">-</span>
              </div>
            </div>
            <div id="suggestionsContainer" style="margin-top: 16px;">
              <!-- Suggestions will be populated here -->
            </div>
            <div class="result-message" id="resultMessageSmart">
              Completa il form per vedere i suggerimenti
            </div>
          </div>

          <!-- Info Box -->
          <div class="info-box">
            <div class="info-box-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="16" x2="12" y2="12"/>
                <line x1="12" y1="8" x2="12.01" y2="8"/>
              </svg>
              Come funziona?
            </div>
            <div class="info-box-content">
              <strong>üéØ Suggerimenti Intelligenti:</strong> Ricevi automaticamente una lista delle materie 
              su cui concentrarti per raggiungere pi√π facilmente la tua media generale target! 
              La media generale include tutti i voti di tutte le materie in tutti i periodi.
            </div>
          </div>
        </div>

        <!-- Divider -->
        <div style="height: 2px; background: linear-gradient(to right, transparent, var(--secondary), transparent); margin: 48px 0;"></div>

        <!-- Section Header for Predict -->
        <h3 style="font-size: 22px; font-weight: bold; color: var(--text); margin-bottom: 16px; padding-left: 8px; border-left: 4px solid var(--accent);">
          üîÆ Prevedi Impatto sulla Media Generale
        </h3>
        <p style="font-size: 14px; opacity: 0.8; margin-bottom: 24px; padding-left: 12px;">
          Vedi come cambier√† la tua media generale con i voti che pensi di prendere
        </p>

        <!-- Overall Predict Section -->
        <div>
          <div class="calculator-card">
            <form id="overallPredictForm">
              <div class="form-group">
                <label class="form-label" for="periodSelectOverallPredict">Periodo</label>
                <select class="form-select" id="periodSelectOverallPredict" required>
                  <option value="">Seleziona un periodo...</option>
                  {% for period in grades_avr.keys() if period != 'all_avr' %}
                  <option value="{{ period }}">Periodo {{ period }}</option>
                  {% endfor %}
                </select>
              </div>

              <div class="form-group">
                <label class="form-label" for="subjectSelectOverallPredict">Materia</label>
                <select class="form-select" id="subjectSelectOverallPredict" required disabled>
                  <option value="">Prima seleziona un periodo...</option>
                </select>
              </div>

              <div class="form-group">
                <label class="form-label">
                  Voti che pensi di prendere nella materia selezionata
                  <span style="font-size: 12px; opacity: 0.7; font-weight: normal;">(vedi impatto sulla media generale)</span>
                </label>
                <div class="grades-input-container" id="overallPredictGradesContainer">
                  <div class="grade-input-group">
                    <input 
                      type="number" 
                      class="grade-input-small overall-predict-grade-input" 
                      min="1" 
                      max="10" 
                      step="0.5" 
                      placeholder="Voto"
                      required
                    />
                  </div>
                </div>
                <button type="button" class="add-grade-btn" onclick="addOverallPredictGradeInput()">+ Aggiungi voto</button>
              </div>

              <button type="submit" class="calculate-btn" id="calculateBtnOverallPredict">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <circle cx="12" cy="12" r="10"/>
                  <polyline points="12 6 12 12 16 14"/>
                </svg>
                Prevedi
              </button>
            </form>
          </div>

          <!-- Result Card for Overall Predict -->
          <div class="result-card" id="resultCardOverallPredict">
            <div class="result-header">
              <div class="result-icon" id="resultIconOverallPredict">
                <span id="resultEmojiOverallPredict">üîÆ</span>
              </div>
              <h2 class="result-title" id="resultTitleOverallPredict">Previsione</h2>
            </div>
            <div class="result-content">
              <div class="result-row">
                <span class="result-label">Media Generale Attuale</span>
                <span class="result-value" id="currentOverallAveragePredict">-</span>
              </div>
              <div class="result-row">
                <span class="result-label">Media Generale Prevista</span>
                <span class="result-value highlight" id="predictedOverallAverage">-</span>
              </div>
              <div class="result-row">
                <span class="result-label">Variazione</span>
                <span class="result-value" id="overallAverageChange">-</span>
              </div>
            </div>
            <div class="result-message" id="resultMessageOverallPredict">
              Completa il form per vedere la previsione
            </div>
          </div>

          <!-- Info Box -->
          <div class="info-box">
            <div class="info-box-title">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="16" x2="12" y2="12"/>
                <line x1="12" y1="8" x2="12.01" y2="8"/>
              </svg>
              Come funziona?
            </div>
            <div class="info-box-content">
              La previsione calcola come cambier√† la tua media generale se ricevi i voti 
              che inserisci in una materia specifica. La media generale include tutti i voti 
              di tutte le materie in tutti i periodi. Utile per capire l'impatto reale dei voti futuri!
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bottom Navigation Bar -->
    <nav class="bottom-nav">
      <a href="/grades" class="nav-item">
        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/>
          <polyline points="9 22 9 12 15 12 15 22"/>
        </svg>
        <span class="nav-label">Medie</span>
      </a>
      <a href="/charts" class="nav-item">
        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="18" y1="20" x2="18" y2="10"/>
          <line x1="12" y1="20" x2="12" y2="4"/>
          <line x1="6" y1="20" x2="6" y2="14"/>
        </svg>
        <span class="nav-label">Grafici</span>
      </a>
      <a href="/goal" class="nav-item active">
        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"/>
          <circle cx="12" cy="12" r="6"/>
          <circle cx="12" cy="12" r="2"/>
        </svg>
        <span class="nav-label">Calcoli</span>
      </a>
      <a href="/export" class="nav-item">
        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="7 10 12 15 17 10"/>
          <line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
        <span class="nav-label">Esporta</span>
      </a>
      <a href="/settings" class="nav-item">
        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="3"/>
          <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
        </svg>
        <span class="nav-label">Impostazioni</span>
      </a>
      <button type="button" class="nav-item" id="logoutNavBtn">
        <svg class="nav-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
          <polyline points="16 17 21 12 16 7"/>
          <line x1="21" y1="12" x2="9" y2="12"/>
        </svg>
        <span class="nav-label">Esci</span>
      </button>
    </nav>

    <script>
      // Inject data from backend for goal.js
      window.gradesData = {{ grades_avr | tojson | safe }};
    </script>
    <script src="/static/js/classeviva-api.js"></script>
    <script src="/static/js/goal.js"></script>
  </body>
</html>
